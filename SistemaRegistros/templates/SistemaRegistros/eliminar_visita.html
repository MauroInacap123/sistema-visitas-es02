{% extends 'SistemaRegistros/base.html' %}
{% load static %}

{% block title %}Eliminar Visita{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'SistemaRegistros/css/eliminar_visita.css' %}">
{% endblock %}

{% block content %}
<div class="container">
  <!-- Header -->
  <div class="page-header">
    <h3>
      <i class="bi bi-trash"></i>
      Eliminar Visita
    </h3>
    <p>Confirmar eliminación del registro</p>
  </div>

  <!-- Alerta de advertencia -->
  <div class="alert alert-warning">
    <i class="bi bi-exclamation-triangle-fill"></i>
    <div>
      <strong>¡Advertencia!</strong> Esta acción no se puede deshacer. El registro será eliminado permanentemente.
    </div>
  </div>

  <!-- Información -->
  <div class="info-container">
    <h5>¿Está seguro que desea eliminar la siguiente visita?</h5>
    
    <p>
      Por favor, revise cuidadosamente la información antes de confirmar la eliminación.
    </p>

    <!-- Detalles de la visita -->
    <div class="detail-card">
      <h6><i class="bi bi-person-badge"></i> Información del Visitante</h6>
      
      <div class="detail-row">
        <div class="detail-label">RUT:</div>
        <div class="detail-value"><strong>{{ visita.rut }}</strong></div>
      </div>

      <div class="detail-row">
        <div class="detail-label">Nombre:</div>
        <div class="detail-value">{{ visita.nombre }}</div>
      </div>

      <div class="detail-row">
        <div class="detail-label">Motivo:</div>
        <div class="detail-value">{{ visita.motivo_visita }}</div>
      </div>

      <div class="detail-row">
        <div class="detail-label">Fecha:</div>
        <div class="detail-value">{{ visita.fecha_visita|date:"d/m/Y" }}</div>
      </div>

      <div class="detail-row">
        <div class="detail-label">Hora Entrada:</div>
        <div class="detail-value">{{ visita.hora_entrada|time:"H:i" }}</div>
      </div>

      <div class="detail-row">
        <div class="detail-label">Hora Salida:</div>
        <div class="detail-value">
          {% if visita.hora_salida %}
            {{ visita.hora_salida|time:"H:i" }}
          {% else %}
            <span class="no-registrada">No registrada</span>
          {% endif %}
        </div>
      </div>

      <div class="detail-row">
        <div class="detail-label">Estado:</div>
        <div class="detail-value">
          {% if visita.estado == 'EN_CURSO' %}
            <span class="badge bg-warning text-dark">⚠️ En Curso</span>
          {% else %}
            <span class="badge bg-success">✅ Finalizada</span>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Formulario de confirmación -->
    <form method="post">
      {% csrf_token %}
      <div class="button-group">
        <a href="{% url 'lista_visitas' %}" class="btn btn-secondary">
          <i class="bi bi-x-circle"></i> No, Cancelar
        </a>
        <button type="submit" class="btn btn-danger">
          <i class="bi bi-trash"></i> Sí, Eliminar Definitivamente
        </button>
      </div>
    </form>

    <!-- Nota informativa -->
    <div class="note-box">
      <p>
        <i class="bi bi-info-circle-fill"></i>
        <strong>Nota:</strong> Una vez eliminado, el registro no podrá ser recuperado. 
        Asegúrese de que realmente desea eliminar esta visita antes de continuar.
      </p>
    </div>
  </div>
</div>
{% endblock %}